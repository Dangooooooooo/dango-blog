!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.qlib=t():e.qlib=t()}("undefined"!=typeof self?self:this,(function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i=n(1),a=n(2),c=n(6);!function(e){e.QQ="QQ",e.Qzone="Qzone",e.Wechat="Wechat",e.Other="Other"}(o||(o={})),t.Client=o,function(e){e.iOS="iOS",e.Android="Android",e.PC="PC"}(r||(r={})),t.Platform=r;var u=function(){function e(e,t,n){void 0===e&&(e="");var o=e.match(/^(\d+)\.(\d+)\.(\d+)$/);o&&4===o.length&&(this.major=parseInt(o[1],10),this.minor=parseInt(o[2],10),this.patch=parseInt(o[3],10)),t&&(this.platform=t),n&&(this.client=n)}return e.prototype.toString=function(){return this.major+"."+this.minor+"."+this.patch},e}();function s(){return void 0!==i.default.process&&null!==i.default.process.versions&&void 0!==i.default.process.versions.node}function l(){return s()?void 0===i.default.context?"":a.getValueByPath(i.default.context,"window.request.headers.user-agent",""):navigator.userAgent}function d(){var e=l();return e.match(/MicroMessenger\/([\d.]+)/)?o.Wechat:e.match(/QQ\/([\d.]+)/)?o.QQ:e.match(/Qzone\//)?o.Qzone:o.Other}function p(){var e=l();return e.match(/(iPad).*OS\s([\d_]+)/)||e.match(/(iPhone\sOS)\s([\d_]+)/)?r.iOS:e.match(/Android/)?r.Android:r.PC}function f(){return!!l().match(/TIM\//)}function g(){var e=l(),t=e.match(/(V\S+_\S+_\S+_\S+_\S+_\S+_\S+)/);return f()&&(t=e.match(/TIM\/(\d[.\d]*)/i)),t?t[1]:""}function m(e){var t,n=e.split("_");return t=7===n.length&&/^(AND|IOS|IPH)$/.test(n[1])&&/^(SQ|QZ)$/.test(n[2])&&/^\d+\.\d+\.\d+$/.test(n[3])&&/^\d+$/.test(n[4])?{os:n[1],version:n[3],subVersion:n[4],appType:n[5]}:{},f()&&(t=4===(n=e.split(".")).length?{version:e.replace("."+n[3],""),subVersion:n[3]}:{}),t}function h(){var e=l(),t=c.getParam("qqtheme"),n=e.match(/QQTheme\/(\d+)/);return n&&(t=n[1]),t}t.Version=u,t.isNode=s,t.getUserAgent=l,t.getClient=d,t.getPlatform=p,t.isMobile=function(){return p()!==r.PC},t.isTIM=f,t.getQuaString=g,t.formatQua=m,t.compareVersion=function(e){if(!g())return-999;var t=m(g()).version||"",n=function(e,t,o){return e[o]||t[o]?e[o]===t[o]?n(e,t,o+1):Number(e[o])-Number(t[o]):0},o=n(t.split("."),String(e).split("."),0);return o<0?-1:o>0?1:0},t.getStatusBarHeight=function(){var e=l().match(/StatusBarHeight\/(\d+)/);return e&&2===e.length?parseInt(e[1],10):0},t.isSimpleMode=function(){return l().indexOf("SimpleUISwitch/1")>-1},t.getThemeId=h,t.isDarkMode=function(){var e=parseInt(h(),10);return!!e&&[2920,1102,1103].indexOf(e)>-1},t.getVersion=function(){var e=p(),t=d(),n=l(),r="";if(t===o.QQ){var i=/QQ\/(\d+\.\d+\.\d+)/;(a=n.match(i))&&2===a.length&&(r=a[1])}if(t===o.Qzone){i=/Qzone\/V1_(AND|IPH)_QZ_(\d+\.\d+\.\d+)_\d+_\w+_\w+/;(a=n.match(i))&&3===a.length&&(r=a[2])}if(t===o.Wechat){var a;i=/MicroMessenger\/(\d+\.\d+\.\d+)/;(a=n.match(i))&&2===a.length&&(r=a[1])}return new u(r,e,t)}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=null;"undefined"!=typeof globalThis?n=globalThis:void 0!==e?n=e:"undefined"!=typeof window&&(n=window),t.default=n}).call(this,n(8))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatDate=function(e,t){var n=t,o="";return n=n.replace(/yyyy|yy/,(function(t){return 4===t.length?String(e.getFullYear()):String(e.getFullYear()).slice(2,4)})).replace(/MM|M/,(function(t){return 2===t.length&&e.getMonth()<9?"0"+(e.getMonth()+1):String(e.getMonth()+1)})).replace(/dd|d/,(function(t){return 2===t.length&&e.getDate()<10?"0"+e.getDate():String(e.getDate())})).replace(/HH|H/,(function(t){return 2===t.length&&e.getHours()<10?"0"+e.getHours():String(e.getHours())})).replace(/hh|h/,(function(t){var n=e.getHours();return o=n>11?"PM":"AM",n=n>12?n-12:n,2===t.length&&n<10?o+" 0"+n:o+" "+n})).replace(/mm/,(function(){return e.getMinutes()<10?"0"+e.getMinutes():String(e.getMinutes())})).replace(/ss/,(function(){return e.getSeconds()<10?"0"+e.getSeconds():String(e.getSeconds())})).replace("tt",o)},t.getValueByPath=function(e,t,n){if(!t||!e)return n;for(var o=t.trim().replace(/^\.|\.$/g,"").split("."),r=e,i=0;i<o.length;++i){var a=o[i];if(void 0!==r[a]&&null!==r[a]){if(i===o.length-1)return r=r[a];r=r[a]}}return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeHtml=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\x60/g,"&#96;").replace(/\x27/g,"&#39;").replace(/\x22/g,"&quot;")},t.decodeHtml=function(e){return String(e).replace(/&quot;/g,'"').replace(/&#0*39;/g,"'").replace(/&#0*96;/g,"`").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")}},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){return void 0===t&&(t="方法/特性尚未实现"),e.call(this,t)||this}return r(t,e),t}(Error);t.NotImplementedError=i;var a=function(e){function t(t){return void 0===t&&(t="不是预料中的类型/方法"),e.call(this,t)||this}return r(t,e),t}(Error);t.UnexpectedError=a;var c=function(e){function t(t){return void 0===t&&(t="方法不支持当前的平台"),e.call(this,t)||this}return r(t,e),t}(Error);t.PlatformNotSupportError=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n(4),i=n(1),a=n(2);function c(e,t,n){if(void 0===n&&(n={}),o.isNode())throw new r.NotImplementedError;var i=e+"="+encodeURIComponent(t)+";";if(n.domain&&(i+="domain="+n.domain+";"),n.path&&(i+="path="+n.path+";"),n.hour){var a=new Date;a.setTime(a.getTime()+36e5*n.hour),i+="expires="+a.toUTCString()+";"}window.document.cookie=i}function u(e,t,n){if(o.isNode())throw new r.NotImplementedError;c(e,"",{domain:t,path:n,hour:-999})}t.set=c,t.del=u,t.clear=function(e,t){if(o.isNode())throw new r.PlatformNotSupportError;var n=window.document.cookie.match(/\w+=[^;]*/g);if(n)for(var i=0,a=n.length;i<a;i++)u(n[i].split("=")[0],e,t)},t.get=function(e){if(o.isNode())return void 0===i.default.context?"":a.getValueByPath(i.default.context,"window.request.cookies."+e,"");var t=new RegExp("(?:^|;\\s*)"+e+"=([^;]*)"),n=window.document.cookie.match(t);return n?decodeURIComponent(n[1]):null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),r=n(0),i=n(1),a=n(4);function c(){var e,t,n;if(r.isNode()){var o=null===(n=null===(t=null===(e=null===i.default||void 0===i.default?void 0:i.default.context)||void 0===e?void 0:e.window)||void 0===t?void 0:t.request)||void 0===n?void 0:n.REQUEST;return o?o.protocol+"://"+o.host+o.href:""}return i.default.location.href}function u(e){if(!e)return"";var t=[];for(var n in e)("string"==typeof e[n]&&e[n]||"number"==typeof e[n])&&t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")}function s(e){if(r.isNode())throw new a.NotImplementedError;var t=document.createElement("a");return t.href=e,{href:e,protocol:t.protocol.replace(":",""),hostname:t.hostname,host:t.hostname,port:t.port,search:t.search,hash:t.hash,pathname:t.pathname.replace(/^([^/])/,"/$1"),params:function(){for(var e={},n=t.search.replace(/^\?/,"").split("&"),r=n.length,i=0;i<r;i++)if(n[i]){var a=n[i].indexOf("=");e[n[i].substr(0,a)]=o.encodeHtml(decodeURIComponent(escape(n[i].substr(a+1))))}return e}()}}t.getCurrentLocation=c,t.toParamString=u,t.appendParam=function(e,t,n){if(void 0===n&&(n=!1),!(t="string"==typeof t?t.replace(/^&/,""):u(t)))return e;if(n)-1===e.indexOf("#")?e+="#"+t:e+="&"+t;else if(-1===e.indexOf("#"))-1===e.indexOf("?")?e+="?"+t:e+="&"+t;else{var o=e.split("#");e=-1===o[0].indexOf("?")?o[0]+"?"+t+"#"+(o[1]||""):o[0]+"&"+t+"#"+(o[1]||"")}return e},t.getParam=function(e,t){void 0===t&&(t=c());var n=new RegExp("(\\?|#|&)"+e+"=(.*?)(&|#|$)"),o=t.match(n);return o?decodeURIComponent(o[2]):""},t.parse=s,t.getParamsObj=function(e){return void 0===e&&(e=c()),s(e).params}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(5);t.cookie=o;var r=n(0);t.browser=r;var i=n(9);t.user=i;var a=n(10);t.schema=a;var c=n(6);t.url=c;var u=n(2);t.util=u;var s=n(3);t.xss=s;var l=n(11);t.string=l;var d=n(12);t.msg=d},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(5);t.getAvatar=function(e,t,n){if(void 0===n&&(n="QQ"),"QQ"===n){return"http://q.qlogo.cn/g?b=qq&nk="+e+"&s="+(t=[40,100,140].indexOf(t)>-1?t:100)}return"QQGroup"===n?"http://p.qlogo.cn/gh/"+e+"/"+e+"/100":"//qlogo"+(e%4+1)+".store.qq.com/qzone/"+e+"/"+e+"/"+(t=[30,50,100].indexOf(t)>-1?t:50)},t.getUin=function(){var e=(o.get("p_uin")||o.get("uin")||"").replace(/\D/g,""),t=Number(e);return t>1e4?t:0},t.isLogin=function(){return(o.get("p_skey")||o.get("skey")||"").length>0},t.logout=function(){o.clear(".qq.com","https://connect.qq.com/"),o.clear(".qzone.qq.com","https://connect.qq.com/"),o.clear(".vip.qq.com","https://connect.qq.com/")},t.getToken=function(e){var t;if(""===(t=(t="p_skey"===e?o.get("p_skey"):"skey"===e?o.get("skey"):o.get("p_skey")||o.get("skey"))||""))return 0;for(var n=5381,r=0,i=t.length;r<i;++r)n+=(n<<5)+t.charCodeAt(r);return 2147483647&n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n(4);t.openPageInQQ=function(e){if(void 0===e&&(e=window.location.href),o.isNode())throw new r.PlatformNotSupportError;o.getPlatform()===o.Platform.PC?window.location.href="https://cdn.vip.qq.com/club/themes/pc/qrcode/html/index.html?title=%E6%89%8B%E6%9C%BAQQ&amp;qrcode_url="+encodeURIComponent(e):o.getClient()!==o.Client.QQ&&(window.location.href=window.location.protocol+"//imgcache.qq.com/club/themes/mobile/middle_page/index.html?url="+encodeURIComponent(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0);t.ubb2html=function(e){void 0===e&&(e="");var t=o.getPlatform()===o.Platform.iOS;return e.replace(/\[em\]e(\d{3,10})\[\/em\]/g,(function(e,n){return'<img class="i-emoji-m" src="https://qzonestyle.gtimg.cn/qzone/em/e'+n+"@2x"+function(e,t){return e?".gif":parseInt(t,10)<200?".png":".gif"}(t,n)+'" alt="表情" >'}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,a=n(0),c=n(3);t.encodeHtml=c.encodeHtml,function(e){e.succ="hook",e.fail="cancel",e.info="info",e.loading="loading",e.noicon="noIcon"}(r||(r={})),function(e){e[e.succ=1]="succ",e[e.fail=2]="fail"}(i||(i={}));var u=['<style type="text/css" id="q_Msgbox_Style">',".gb-tips {position:fixed;width:100%;top:30%;text-align:center;z-index:9999;font-size:14px}",".gb-tips .gb-tips-layer {position:relative;display:inline-block;max-width:54%;padding:8px 10px 8px 38px;text-align:left;line-height:22px;background:rgba(0,0,0,.7);color:#fff;border-radius:5px;max-width:220px}",".gb-tips .gb-tips-layer.no-icon {padding:8px 10px}",".gb-tips .gb-tips-layer .icon-hook {position:absolute;top:12px;left:12px;width:17px;height:12px;background-image:url(//qzonestyle.gtimg.cn/qz-act/public/mobile/img/tick-white.png?max_age=19830212&d=20130918105242);background-size:17px 12px}",".gb-tips .gb-tips-layer .icon-info {position:absolute;top:7px;left:7px;width:24px;height:24px;background-image:url(//qzonestyle.gtimg.cn/qz-act/public/mobile/img/info-white.png?max_age=19830212&d=20130918105242);background-size:24px 24px}",".gb-tips .gb-tips-layer .icon-cancel {position:absolute;left:12px;top:11px;width:16px;height:16px;background-image:url(//qzonestyle.gtimg.cn/qz-act/public/mobile/img/close-white.png?max_age=19830212&d=20130918105242);background-size:16px 16px}",".gb-tips .gb-tips-layer .icon-loading {position:absolute;top:3px;left:3px;height:32px;width:32px;background:url(//qzonestyle.gtimg.cn/qz-proj/weishi-mobile/img/loading.gif?max_age=19830212&d=20130918105242) center center no-repeat;background-size:20px 20px;-webkit-animation:mask 600ms infinite step-start;-moz-animation:mask 600ms infinite step-start;-ms-animation:mask 600ms infinite step-start;-o-animation:mask 600ms infinite step-start;animation:mask 600ms infinite step-start}","</style>"].join("\n");function s(){window.document.getElementById("q_Msgbox")&&window.document.getElementById("q_Msgbox").remove(),window.document.getElementById("q_Msgbox_Style")&&window.document.getElementById("q_Msgbox_Style").remove()}t.hide=s,t.show=function(e){var t,n,r=e.middle,l=e.vertical;if(o&&clearTimeout(o),s(),!e.delay&&!r&&!l&&"QQ"===a.getClient()&&window.mqq){var d=void 0;return d="succ"===e.iconType?i.succ:"fail"===e.iconType?i.fail:i.succ,void(null===(n=null===(t=window.mqq)||void 0===t?void 0:t.ui)||void 0===n||n.showTips({text:e.content,iconMode:d}))}var p="200px",f=window.innerHeight;r&&(p=f/2-38+"px"),l&&(p="50%"),window.document.querySelector("body").appendChild(function(e){var t=window.document.createElement("div");t.setAttribute("id","q_Msgbox"),t.setAttribute("class","gb-tips"),t.innerHTML='<div class="gb-tips-layer"><i></i>'+c.encodeHtml(e.content)+"</div>";var n=t.querySelector(".gb-tips-layer");if("noIcon"===String(e.icon))n&&n.classList&&n.classList.add("no-icon");else{var o=t.querySelector("i");o&&o.classList&&o.classList.add("icon-"+e.icon)}return e.vertical&&(n.style.transform="rotateZ(90deg) translateY(-50%)"),t.style.top=e.top,window.document.createRange().createContextualFragment(u+t.outerHTML)}({icon:e.iconType||"info",content:e.content||"",vertical:l,top:p})),o=setTimeout(s,e.delay||2e3)},t.log=function(e){(new Image).src="//www.qq.com/log?log="+e}}])}));
//# sourceMappingURL=index.js.map